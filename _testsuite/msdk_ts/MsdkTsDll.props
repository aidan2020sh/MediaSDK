<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003" InitialTargets="Win8SdkCheck;PerlPresenseCheck">
  <ImportGroup Label="PropertySheets" />
  <PropertyGroup Label="UserMacros" />
  <PropertyGroup Condition="'$(Platform)'=='Win32'">
    <PerlDir>$([MSBuild]::GetRegistryValueFromView('HKEY_LOCAL_MACHINE\SOFTWARE\Perl', null, null, RegistryView.Registry32))</PerlDir>
     </PropertyGroup>
  <PropertyGroup Condition="'$(Platform)'=='x64'">
    <PerlDir>$([MSBuild]::GetRegistryValueFromView('HKEY_LOCAL_MACHINE\SOFTWARE\Perl', null, null, RegistryView.Registry64))</PerlDir>
  </PropertyGroup>
  <ItemGroup>
    <PerlLibs Include="$(PerlDir)\lib\CORE\libperl5??.a;$(PerlDir)\lib\CORE\perl5??.lib"/>
  </ItemGroup>
  <PropertyGroup>
    <PerlLib>@(PerlLibs)</PerlLib>
  </PropertyGroup>
  <PropertyGroup>
    <OutDir>$(MfxBuildDir)win_$(Platform)\lib\</OutDir>
    <IntDir>$(MfxBuildDir)win_$(Platform)\objs\$(Configuration)\$(ProjectName)\</IntDir>
  </PropertyGroup>
  <Target Name="Win8SdkCheck" BeforeTargets="Build">
  </Target>
  <Target Name="PerlPresenseCheck">
    <Error Text=" Unable to find installed Perl that is relevant to target bitness (Win32||x64) by registry lookup.
           Please install bitness corresponding Perl or choose another platform type.
           For more info please goto http://wiki.ith.intel.com/display/MediaSDK/Debugging+behavior+tests"
       Condition ="!Exists('$(PerlDir)')" />
  </Target>
  <ItemDefinitionGroup />
  <ItemGroup />
</Project>
